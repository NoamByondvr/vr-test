language: objective-c
osx_image: xcode8.2
before_install:
    - export BRANCH=v1.3.0
    - export REPO_NAME=vr-app-2.0

    - export DOWNLOAD_DIR=downloads
    - export ANDROID_DIR=android
    - export BUILD_DIR=Build
    - export PROJECT_PATH=$(pwd)

    - sudo mkdir -p $DOWNLOAD_DIR
    - sudo mkdir -p $ANDROID_DIR
    - sudo mkdir -p $BUILD_DIR

    - sudo chmod +x install_android_sdk.sh
    - sudo chmod +x install_unity.sh
    - sudo chmod +x build_android.sh
    - sudo chmod +x close_unity.sh
install:
    - ./install_android_sdk.sh
    - ./install_unity.sh
script:
    - ./build_android.sh
    - ./close_unity.sh
deploy:
    provider: s3
    access_key_id: $AWS_ACCESS_KEY_ID
    secret_access_key: $AWS_SECRET_ACCESS_KEY
    bucket: travis-build-test
    skip_cleanup: true
    acl: public_read
    local_dir: Build
