language: objective-c
env:
    global:
        - DOWNLOAD_DIR=$HOME/.cache/downloads
        - ANDROID_DIR=$HOME/.cache/android
        - TMP=$HOME/.tmp
        - BUILD_DIR=$pwd/Build
cache:
    bundler: true
    directories:
        - $HOME/.cache
        - $HOME/Applications
osx_image: xcode8.2
before_install:
    - mkdir -p $DOWNLOAD_DIR
    - mkdir -p $ANDROID_DIR
    - mkdir -p $TMP
    - mkdir -p $BUILD_DIR
    - chmod +x ./Scripts/install_android_sdk.sh
    - chmod +x ./Scripts/install_unity.sh
    - chmod +x ./Scripts/install_unity_android.sh
install:
    - "./Scripts/install_android_sdk.sh"
    - "./Scripts/install_unity.sh"
script:
    - "./Scripts/build.sh"
deploy:
    provider: s3
    access_key_id: $AWS_ACCESS_KEY_ID
    secret_access_key: $AWS_SECRET_ACCESS_KEY
    bucket: travis-build-test
    skip_cleanup: true
    acl: public_read
    local_dir: Build
