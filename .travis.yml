language: objective-c
osx_image: xcode8.2
cache:
    bundler: true
    directories:
        - $HOME/.cache
        - $HOME/Applications
before_install:
    - export BRANCH=v1.3.0
    - export REPO_NAME=vr-app-2.0

    - export DOWNLOAD_DIR=$(HOME)/.cache/downloads
    - export ANDROID_DIR=$(HOME)/.cache/android
    - export BUILD_DIR=$(pwd)/Build
    - export PROJECT_PATH=$(pwd)/$REPO_NAME

    - sudo mkdir -p $DOWNLOAD_DIR
    - sudo mkdir -p $ANDROID_DIR
    - sudo mkdir -p $BUILD_DIR

    - chmod +x ./Scripts/get_repo.sh
    - chmod +x ./Scripts/install_android_sdk.sh
    - chmod +x ./Scripts/install_unity.sh
    - chmod +x ./Scripts/install_unity_android.sh
install:
    - "./Scripts/get_repo.sh"
    - "./Scripts/install_android_sdk.sh"
    - "./Scripts/install_unity.sh"
script:
    - "./Scripts/build.sh"
deploy:
    provider: s3
    access_key_id: $AWS_ACCESS_KEY_ID
    secret_access_key: $AWS_SECRET_ACCESS_KEY
    bucket: travis-build-test
    skip_cleanup: true
    acl: public_read
    local_dir: Build
